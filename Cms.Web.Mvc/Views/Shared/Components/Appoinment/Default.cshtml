@model AppoinmentViewModel
<section class="section appoinment" id="appoinment">
	<div class="container">
		<div class="row align-items-center">
			<div class="col-lg-6 ">
				<div class="appoinment-content">
					<img src="images/about/img-3.jpg" alt="" class="img-fluid">
					<div class="emergency">
						<h2 class="text-lg"><i class="icofont-phone-circle text-lg"></i>+23 345 67980</h2>
					</div>
				</div>
			</div>
			<div class="col-lg-6 col-md-10 ">
				<div class="appoinment-wrap mt-5 mt-lg-0">
					<h2 class="mb-2 title-color">Book appoinment</h2>
					<p class="mb-4">Mollitia dicta commodi est recusandae iste, natus eum asperiores corrupti qui velit . Iste dolorum atque similique praesentium soluta.</p>
					<form id="#" class="appoinment-form" method="post" action="#">
						<div class="row">
							<div class="col-lg-6">
								<div class="form-group">
									<select class="form-control" id="departments" asp-items="Model.Departments">
										<option>Choose Department</option>
									</select>
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<select class="form-control" id="doctors" @*asp-items="Model.Doctors"*@>
										<option>Choose Doctor</option>
										@foreach (var item in Model.Doctors)
										{
											<option value="@item.Value" department="@item.DepartmentId">@item.Text</option>
										}
									</select>
								</div>
							</div>

							<div class="col-lg-6">
								<div class="form-group">
									<input name="date" id="date" type="text" class="form-control" placeholder="dd/mm/yyyy">
								</div>
							</div>

							<div class="col-lg-6">
								<div class="form-group">
									<input name="time" id="time" type="text" class="form-control" placeholder="Time">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<input name="name" id="name" type="text" class="form-control" placeholder="Full Name">
								</div>
							</div>

							<div class="col-lg-6">
								<div class="form-group">
									<input name="phone" id="phone" type="Number" class="form-control" placeholder="Phone Number">
								</div>
							</div>
						</div>
						<div class="form-group-2 mb-4">
							<textarea name="message" id="message" class="form-control" rows="6" placeholder="Your Message"></textarea>
						</div>

						<a class="btn btn-main btn-round-full" href="appoinment.html">Make Appoinment <i class="icofont-simple-right ml-2  "></i></a>
					</form>
				</div>
			</div>
		</div>
	</div>
</section>
<script>
	var departments = document.getElementById('departments');
	var doctors = document.getElementById('doctors');
	refreshSelectList();
	
	departments.addEventListener("change",refreshSelectList);

	function refreshSelectList(){
		let doctorExists = false;

		for (let i = 0; i < doctors.children.length; i++) {
					doctors.children[i].classList.add("d-none");
			}

		for(let i=0;i<doctors.children.length;i++){
			if(departments.children[departments.selectedIndex].value == doctors.children[i].getAttribute("department")){
				doctors.children[i].classList.remove("d-none");
			}
		}

		for (let i = 0; i < doctors.children.length; i++) {
			if(!doctors.children[i].classList.contains("d-none")){
				doctorExists = true;
			}
		}
		if(doctorExists == false){
			doctors.children[0].innerHTML = "Select another department"
		}else{
			doctors.children[0].innerHTML = "Choose Doctor"
		}
	}
</script>
